{"version":3,"file":"transform-1PDozfHr.js","sources":["../src/-private/string/transform.ts"],"sourcesContent":["/**\n * @module @ember-data/request-utils/string\n */\nimport { DEBUG } from '@warp-drive/build-config/env';\n\nconst DEFAULT_MAX_CACHE_SIZE = 10_000;\nexport class LRUCache<T, V> {\n  declare size: number;\n  declare state: Map<T, V>;\n  declare doWork: (k: T) => V;\n\n  // debug stats\n  declare _hits: number;\n  declare _misses: number;\n  declare _ejected: number;\n\n  constructor(doWork: (k: T) => V, size?: number) {\n    this.size = size || DEFAULT_MAX_CACHE_SIZE;\n    this.state = new Map();\n    this.doWork = doWork;\n\n    if (DEBUG) {\n      this._hits = 0;\n      this._misses = 0;\n      this._ejected = 0;\n    }\n  }\n  get(key: T) {\n    const value = this.state.get(key);\n    if (value) {\n      if (DEBUG) {\n        this._hits++;\n      }\n      this.state.delete(key);\n      this.state.set(key, value);\n      return value;\n    }\n    if (DEBUG) {\n      this._misses++;\n    }\n\n    const newValue = this.doWork(key);\n    this.set(key, newValue);\n    return newValue;\n  }\n\n  set(key: T, value: V) {\n    if (this.state.size === this.size) {\n      for (const [k] of this.state) {\n        if (DEBUG) {\n          this._ejected++;\n        }\n        this.state.delete(k);\n        break;\n      }\n    }\n    this.state.set(key, value);\n  }\n\n  clear() {\n    this.state.clear();\n    if (DEBUG) {\n      this._hits = 0;\n      this._misses = 0;\n      this._ejected = 0;\n    }\n  }\n}\n\nconst STRING_DASHERIZE_REGEXP = /[ _]/g;\nconst STRING_DECAMELIZE_REGEXP = /([a-z\\d])([A-Z])/g;\nconst STRING_DASHERIZE_CACHE = new LRUCache<string, string>((key: string) =>\n  key.replace(STRING_DECAMELIZE_REGEXP, '$1_$2').toLowerCase().replace(STRING_DASHERIZE_REGEXP, '-')\n);\n\n// eslint-disable-next-line no-useless-escape\nconst STRING_CAMELIZE_REGEXP_1 = /(\\-|\\_|\\.|\\s)+(.)?/g;\nconst STRING_CAMELIZE_REGEXP_2 = /(^|\\/)([A-Z])/g;\nconst CAMELIZE_CACHE = new LRUCache<string, string>((key: string) =>\n  key\n    .replace(STRING_CAMELIZE_REGEXP_1, (_match, _separator, chr: string | null) => (chr ? chr.toUpperCase() : ''))\n    .replace(STRING_CAMELIZE_REGEXP_2, (match /*, separator, chr */) => match.toLowerCase())\n);\n\nconst STRING_UNDERSCORE_REGEXP_1 = /([a-z\\d])([A-Z]+)/g;\n// eslint-disable-next-line no-useless-escape\nconst STRING_UNDERSCORE_REGEXP_2 = /\\-|\\s+/g;\nconst UNDERSCORE_CACHE = new LRUCache<string, string>((str: string) =>\n  str.replace(STRING_UNDERSCORE_REGEXP_1, '$1_$2').replace(STRING_UNDERSCORE_REGEXP_2, '_').toLowerCase()\n);\n\nconst STRING_CAPITALIZE_REGEXP = /(^|\\/)([a-z\\u00C0-\\u024F])/g;\nconst CAPITALIZE_CACHE = new LRUCache<string, string>((str: string) =>\n  str.replace(STRING_CAPITALIZE_REGEXP, (match /*, separator, chr */) => match.toUpperCase())\n);\n\n/**\n * Replaces underscores, spaces, or camelCase with dashes.\n *\n * ```js\n * import { dasherize } from '@ember-data/request-utils/string';\n *\n * dasherize('innerHTML');                // 'inner-html'\n * dasherize('action_name');              // 'action-name'\n * dasherize('css-class-name');           // 'css-class-name'\n * dasherize('my favorite items');        // 'my-favorite-items'\n * dasherize('privateDocs/ownerInvoice';  // 'private-docs/owner-invoice'\n * ```\n *\n * @method dasherize\n * @public\n * @static\n * @for @ember-data/request-utils/string\n * @param {String} str\n * @return {String}\n * @since 4.13.0\n */\nexport function dasherize(str: string): string {\n  return STRING_DASHERIZE_CACHE.get(str);\n}\n\n/**\n * Returns the lowerCamelCase form of a string.\n *\n * ```js\n * import { camelize } from '@ember-data/request-utils/string';\n *\n * camelize('innerHTML');                   // 'innerHTML'\n * camelize('action_name');                 // 'actionName'\n * camelize('css-class-name');              // 'cssClassName'\n * camelize('my favorite items');           // 'myFavoriteItems'\n * camelize('My Favorite Items');           // 'myFavoriteItems'\n * camelize('private-docs/owner-invoice');  // 'privateDocs/ownerInvoice'\n * ```\n *\n * @method camelize\n * @public\n * @static\n * @for @ember-data/request-utils/string\n * @param {String} str\n * @return {String}\n * @since 4.13.0\n */\nexport function camelize(str: string): string {\n  return CAMELIZE_CACHE.get(str);\n}\n\n/**\n * Returns the lower\\_case\\_and\\_underscored form of a string.\n *\n * ```js\n * import { underscore } from '@ember-data/request-utils/string';\n *\n * underscore('innerHTML');                 // 'inner_html'\n * underscore('action_name');               // 'action_name'\n * underscore('css-class-name');            // 'css_class_name'\n * underscore('my favorite items');         // 'my_favorite_items'\n * underscore('privateDocs/ownerInvoice');  // 'private_docs/owner_invoice'\n * ```\n *\n * @method underscore\n * @public\n * @static\n * @for @ember-data/request-utils/string\n * @param {String} str\n * @return {String}\n * @since 4.13.0\n */\nexport function underscore(str: string): string {\n  return UNDERSCORE_CACHE.get(str);\n}\n\n/**\n * Returns the Capitalized form of a string\n *\n * ```js\n * import { capitalize } from '@ember-data/request-utils/string';\n *\n * capitalize('innerHTML')                 // 'InnerHTML'\n * capitalize('action_name')               // 'Action_name'\n * capitalize('css-class-name')            // 'Css-class-name'\n * capitalize('my favorite items')         // 'My favorite items'\n * capitalize('privateDocs/ownerInvoice'); // 'PrivateDocs/ownerInvoice'\n * ```\n *\n * @method capitalize\n * @static\n * @public\n * @for @ember-data/request-utils/string\n * @param {String} str\n * @return {String}\n * @since 4.13.0\n */\nexport function capitalize(str: string): string {\n  return CAPITALIZE_CACHE.get(str);\n}\n\n/**\n * Sets the maximum size of the LRUCache for all string transformation functions.\n * The default size is 10,000.\n *\n * @method setMaxLRUCacheSize\n * @public\n * @static\n * @for @ember-data/request-utils/string\n * @param {Number} size\n * @return {void}\n * @since 4.13.0\n */\nexport function setMaxLRUCacheSize(size: number) {\n  CAMELIZE_CACHE.size = size;\n  UNDERSCORE_CACHE.size = size;\n  CAPITALIZE_CACHE.size = size;\n  STRING_DASHERIZE_CACHE.size = size;\n}\n"],"names":["DEFAULT_MAX_CACHE_SIZE","LRUCache","constructor","doWork","size","state","Map","macroCondition","getGlobalConfig","WarpDrive","env","DEBUG","_hits","_misses","_ejected","get","key","value","delete","set","newValue","k","clear","STRING_DASHERIZE_REGEXP","STRING_DECAMELIZE_REGEXP","STRING_DASHERIZE_CACHE","replace","toLowerCase","STRING_CAMELIZE_REGEXP_1","STRING_CAMELIZE_REGEXP_2","CAMELIZE_CACHE","_match","_separator","chr","toUpperCase","match","STRING_UNDERSCORE_REGEXP_1","STRING_UNDERSCORE_REGEXP_2","UNDERSCORE_CACHE","str","STRING_CAPITALIZE_REGEXP","CAPITALIZE_CACHE","dasherize","camelize","underscore","capitalize","setMaxLRUCacheSize"],"mappings":"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BAA0B,EAAE,OAAO,CAAC,CAACV,OAAO,CAACW,0BAA0B,EAAE,GAAG,CAAC,CAACV,WAAW,EACvG,CAAC;AAED,MAAMa,wBAAwB,GAAG,6BAA6B;AAC9D,MAAMC,gBAAgB,GAAG,IAAIxC,QAAQ,CAAkBsC,GAAW,IAChEA,GAAG,CAACb,OAAO,CAACc,wBAAwB,EAAE,CAACL,KAAK,2BAA2BA,KAAK,CAACD,WAAW,EAAE,CAC5F,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASQ,SAASA,CAACH,GAAW,EAAU;AAC7C,EAAA,OAAOd,sBAAsB,CAACV,GAAG,CAACwB,GAAG,CAAC;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASI,QAAQA,CAACJ,GAAW,EAAU;AAC5C,EAAA,OAAOT,cAAc,CAACf,GAAG,CAACwB,GAAG,CAAC;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASK,UAAUA,CAACL,GAAW,EAAU;AAC9C,EAAA,OAAOD,gBAAgB,CAACvB,GAAG,CAACwB,GAAG,CAAC;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASM,UAAUA,CAACN,GAAW,EAAU;AAC9C,EAAA,OAAOE,gBAAgB,CAAC1B,GAAG,CAACwB,GAAG,CAAC;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASO,kBAAkBA,CAAC1C,IAAY,EAAE;EAC/C0B,cAAc,CAAC1B,IAAI,GAAGA,IAAI;EAC1BkC,gBAAgB,CAAClC,IAAI,GAAGA,IAAI;EAC5BqC,gBAAgB,CAACrC,IAAI,GAAGA,IAAI;EAC5BqB,sBAAsB,CAACrB,IAAI,GAAGA,IAAI;AACpC;;;;"}